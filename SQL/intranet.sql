CREATE SEQUENCE SEQ_EMP
START WITH 1001
INCREMENT BY 1
NOCYCLE
NOCACHE;

CREATE SEQUENCE SEQ_ALIM
START WITH 1
INCREMENT BY 1
NOCYCLE
NOCACHE;

CREATE SEQUENCE SEQ_DRAFT
START WITH 20200000
INCREMENT BY 1
NOCYCLE
NOCACHE;

CREATE SEQUENCE SEQ_DAILY
START WITH 1
INCREMENT BY 1
NOCYCLE
NOCACHE;

CREATE SEQUENCE SEQ_NOTICE
START WITH 1
INCREMENT BY 1
NOCYCLE
NOCACHE;

CREATE SEQUENCE SEQ_CHILD
START WITH 2020001
INCREMENT BY 1
NOCYCLE
NOCACHE;

CREATE SEQUENCE SEQ_CALEN
START WITH 11
INCREMENT BY 1
NOCYCLE
NOCACHE;

CREATE TABLE JOB(
    JOB_CODE NUMBER PRIMARY KEY,
    JOB_NAME VARCHAR2(20) NOT NULL
);

INSERT INTO JOB VALUES(1,'원장');
INSERT INTO JOB VALUES(2,'부원장');
INSERT INTO JOB VALUES(3,'교사');
INSERT INTO JOB VALUES(4,'영양사');
INSERT INTO JOB VALUES(5,'계약직');
INSERT INTO JOB VALUES(6,'학부모');

CREATE TABLE CLASS(
    CLASS_CODE NUMBER PRIMARY KEY,
    CLASS_NAME VARCHAR2(20) NOT NULL,
    LIMIT_AGE NUMBER NOT NULL,
    MAX_ENTRANCE NUMBER NOT NULL
);

INSERT INTO CLASS VALUES(1,'씨앗',3,20);
INSERT INTO CLASS VALUES(2,'새싹',4,20);
INSERT INTO CLASS VALUES(3,'나무',5,20);
INSERT INTO CLASS VALUES(4,'열매',7,20);
INSERT INTO CLASS VALUES(0,'원장',0,0);


  


CREATE TABLE DRAFT(
    DRAFT_NO NUMBER PRIMARY KEY,
    DRAFT_TYPE NUMBER NOT NULL,
    DRAFT_EMP NUMBER,
    DRAFT_DATE DATE NOT NULL,
    DRAFT_YN VARCHAR2(10) CHECK (DRAFT_YN IN('Y','N')),
    SIGN_EMP VARCHAR2(100),
    SIGN_YN VARCHAR2(100),
    RETURN_REASON VARCHAR2(300),
    DRAFT_TITLE VARCHAR2(50) NOT NULL,
    DRAFT_CONTENT VARCHAR2(300) NOT NULL,
    DRAFT_FILE VARCHAR2(300),
    DRAFT_PROCESS VARCHAR2(20) CHECK (DRAFT_PROCESS IN('검토','승인','반려')),
    CONSTRAINT FK_DRAFT_EMP FOREIGN KEY(DRAFT_EMP) REFERENCES EMPLOYEE(EMP_CODE)
); 

ALTER TABLE DRAFT DROP COLUMN DRAFT_YN;
ALTER TABLE DRAFT ADD (DRAFT_CHK  VARCHAR2(10));
ALTER TABLE DRAFT ADD (DRAFT_IS_DEL VARCHAR2(10));

CREATE TABLE DRAFT_PROCESS(
   PRO_NO NUMBER PRIMARY KEY,
   PRO_NAME VARCHAR2(20)
);

INSERT INTO DRAFT_PROCESS VALUES(1,'검토');
INSERT INTO DRAFT_PROCESS VALUES(2,'승인');
INSERT INTO DRAFT_PROCESS VALUES(3,'반려');


CREATE TABLE DAILY(
    DAILY_NO NUMBER,
    DAILY_CLASS NUMBER,
    DAILY_TITLE VARCHAR2(50) NOT NULL,
    DAILY_DATE DATE,
    DAILY_EMP_NAME VARCHAR2(20) NOT NULL,
    DAILY_PASS VARCHAR2(50),
    DAILY_FILE VARCHAR2(150),
    DAILY_EMP NUMBER,
    IS_DELETE VARCHAR2(10) CHECK(IS_DELETE IN ('Y','N')),
    CONSTRAINT FK_DAILY_EMP FOREIGN KEY(DAILY_EMP) REFERENCES EMPLOYEE(EMP_CODE),
    CONSTRAINT FK_DAILY_CLASS FOREIGN KEY(DAILY_CLASS) REFERENCES CLASS(CLASS_CODE)
);

ALTER TABLE DAILY RENAME COLUMN DAILY_PASS TO DAILY_CATEGORY;
ALTER TABLE DAILY MODIFY DAILY_CATEGORY NUMBER;
ALTER TABLE DAILY ADD CONSTRAINT CHK_CATEGORY CHECK(DAILY_CATEGORY IN (1,2)); 
ALTER TABLE DAILY DROP PRIMARY KEY;
ALTER TABLE DAILY ADD (DAILY_CONTENT VARCHAR2(500));
ALTER TABLE DAILY ADD (DAILY_COUNT NUMBER);


CREATE TABLE DAILY_CATEGORY(
    CATEGORY_CODE NUMBER PRIMARY KEY,
    CATEGORY_NAME VARCHAR2(20)
);
INSERT INTO DAILY_CATEGORY VALUES(1,'공지사항');
INSERT INTO DAILY_CATEGORY VALUES(2,'교육일지');

CREATE TABLE CHILD(
    CHILD_CODE NUMBER PRIMARY KEY,
    CHILD_NAME VARCHAR2(20) NOT NULL,
    CHILD_GENDER VARCHAR2(10),
    CHILD_NO VARCHAR2(50) NOT NULL UNIQUE,
    CHILD_BIRTH VARCHAR2(50),
    CHILD_ENTRANCE VARCHAR2(50),
    CHILD_GRADUATE VARCHAR2(50) DEFAULT '1900',
    CHILD_ADDR VARCHAR2(500) NOT NULL,
    CHILD_AGE NUMBER,
    CHILD_STATE VARCHAR2(20),
    CHILD_CLASS VARCHAR2(50),
    CHILD_IMAGE VARCHAR2(200),
    PARENT_CODE NUMBER DEFAULT 0
);
INSERT INTO CHILD VALUES(10000,'박테스트','중성','200202-1111111','2020-02-02','2019-03-02','1900','노숙',1,'재학','5','SIBAL',0);

CREATE TABLE FAMILY(
    CHILD_CODE NUMBER REFERENCES CHILD(CHILD_CODE),
    FAMILY_REL VARCHAR2(10) CHECK (FAMILY_REL IN('부','모','기타')),
    FAMILY_NAME VARCHAR2(20) NOT NULL,
    FAMILY_PHONE VARCHAR2(50),
    FAMILY_SUB VARCHAR2(50),
    FAMILY_EMAIL VARCHAR2(50),
    SIGN_YN VARCHAR2(10) CHECK (SIGN_YN IN ('Y','N')),
    FAMILY_MEMO VARCHAR2(50)
);

CREATE TABLE EVENT(
    E_CODE VARCHAR2(50),
	E_CONTENT CLOB NOT NULL
); 

INSERT INTO EVENT VALUES('급식남품업체 입찰','{"allDay":false,"backgroundColor":"#D25565","start":"2020-02-07 09:30","description":"동원식품, 한일식품, 롯데제과, 해테","end":"2020-02-07T15:00","_id":1,"title":"급식남품업체 입찰","type":"기타","textColor":"#ffffff","username":"영양사"}');
INSERT INTO EVENT VALUES('화재안전점검','{"allDay":false,"backgroundColor":"#9775fa","start":"2020-02-01 12:30","description":"2020년 정기 화재점검","end":"2020-02-01T15:30","_id":2,"title":"화재안전점검","type":"기타","textColor":"#ffffff","username":"임도훈"}');
INSERT INTO EVENT VALUES('2월 원생 생일 파티','{"allDay":true,"backgroundColor":"#ffa94d","start":"2020-02-03","description":"대상 : 임도훈,이서원,이승효","end":"2020-02-03","_id":3,"title":"2월 원생 생일 파티","type":"원내행사","textColor":"#ffffff","username":"교사"}');
INSERT INTO EVENT VALUES('적금 만기','{"allDay":true,"backgroundColor":"#74c0fc","start":"2020-02-06","description":"적금 갱신 요함","end":"2020-02-06","_id":4,"title":"적금 만기","type":"기타","textColor":"#ffffff","username":"원장"}');
INSERT INTO EVENT VALUES('원생 화스트페이스','{"allDay":true,"backgroundColor":"#63e6be","start":"2020-02-14","description":"비밀임","end":"2020-02-14","_id":6,"title":"원생 화스트페이스","type":"원내행사","textColor":"#ffffff","username":"원장"}');
INSERT INTO EVENT VALUES('피시방 체험학습','{"allDay":true,"backgroundColor":"#a9e34b","start":"2020-02-18","description":"프로게이머 양성을 위한 조기교육","end":"2020-02-18","_id":7,"title":"피시방 체험학습","type":"체험학습","textColor":"#ffffff","username":"교사"}');
INSERT INTO EVENT VALUES('2월 정기회의','{"allDay":false,"backgroundColor":"#4d638c","start":"2020-02-24 09:00","description":"졸면 사망","end":"2020-02-24T10:00","_id":8,"title":"2월 정기회의","type":"교사일정","textColor":"#ffffff","username":"교사"}');
INSERT INTO EVENT VALUES('출장','{"allDay":true,"backgroundColor":"#495057","start":"2020-02-28","description":"사실 놀러감","end":"2020-02-28","_id":9,"title":"출장","type":"교사일정","textColor":"#ffffff","username":"원장"}');
INSERT INTO EVENT VALUES('입학 원서접수','{"allDay":true,"backgroundColor":"#9775fa","start":"2020-02-19","description":"귀찮으니 하지마세요","end":"2020-02-21","_id":10,"title":"입학 원서접수","type":"원내행사","textColor":"#ffffff","username":"원장"}');
INSERT INTO EVENT VALUES('원생 배틀로얄','{"allDay":true,"backgroundColor":"#D25565","start":"2020-02-05","description":"강한자만이 살아남는다","end":"2020-02-06","_id":11,"title":"원생 배틀로얄","type":"원내행사","textColor":"#ffffff","username":"교사"}');
INSERT INTO EVENT VALUES('나나나','{"allDay":true,"backgroundColor":"#D25565","start":"2020-01-31","description":"","end":"2020-02-01","_id":12,"title":"나나나","type":"기타","textColor":"#ffffff","username":"교사"}');


CREATE TABLE EMPLOYEE(
    EMP_CODE NUMBER PRIMARY KEY,
    EMP_NAME VARCHAR2(20) NOT NULL,
    EMP_JOB  VARCHAR2(20),
    EMP_NO VARCHAR2(50) NOT NULL UNIQUE,
    EMP_PHONE VARCHAR2(50) NOT NULL,
    EMP_EMAIL VARCHAR2(100) NOT NULL,
    EMP_ADDR VARCHAR2(450) NOT NULL,
    HIRE_DATE VARCHAR2(50) NOT NULL,
    ENT_DATE VARCHAR2(50),
    ENT_YN VARCHAR2(10),
    EMP_CLASS VARCHAR2(20),
    HOBONG NUMBER DEFAULT 1,
    EMP_IMG VARCHAR2(50)
);


INSERT INTO EMPLOYEE VALUES('1001','박막례','1','630123-2091841','01038591042','mrpark@gmail.com','서울 마포구 와우산로27길, 79','20101001',null,'Y',null,'23','1001.png');
INSERT INTO EMPLOYEE VALUES('1002','정재일','2','720912-1736284','01095820623','jeailjung@naver.com','서울 광진구 동일로22길, 111','20111001',null,'Y',null,'20','1002.png');
INSERT INTO EMPLOYEE VALUES('1003','김지혜','3','910430-2840185','01047290531','jgkim@daum.net','서울 종로구 삼봉로 100, 1층','20130201',null,'Y','1','7','1003.png');
INSERT INTO EMPLOYEE VALUES('1004','박승현','3','920627-1740180','01088369592','shpark@naver.com','서울 중구 다산로 265, 럭키프라자 1층','20130201','20140531','N','2','6','1004.png');
INSERT INTO EMPLOYEE VALUES('1005','김정희','3','840103-2829672','01096721846','junghee@gmail.com','서울 은평구 연서로 221, 3층','20130201','20150131','N','3','12','1005.png');
INSERT INTO EMPLOYEE VALUES('1006','함원심','3','930512-1058372','01093859293','1sim@daum.net','서울 강남구 논현로 841, 1903호','20140601',null,'Y','2','5','1006.png');
INSERT INTO EMPLOYEE VALUES('1007','박민영','3','900418-2059381','01052859325','minyoung@naver.com','서울 강동구 구천면로 429, 3층','20140210',null,'Y','3','8','1007.png');
INSERT INTO EMPLOYEE VALUES('1008','김남주','5','850718-2049184','01078942672','nammmjooo@gmail.com','서울 송파구 백제고분로7길, 28-5','20150201',null,'Y',null,'0','1008.png');
INSERT INTO EMPLOYEE VALUES('1009','이준영','3','880507-2058362','01028462819','young@gmail.com','서울 구로구 개봉로20길 54, 405호','20150201',null,'Y','4','10','1009.png');
INSERT INTO EMPLOYEE VALUES('1010','강지영','4','790828-2769265','01094625174','jeeyoungkang@naver.com','서울 구로구 도림천로 338, 309호','20150301',null,'Y',null,'15','1010.png');
INSERT INTO EMPLOYEE VALUES('1011','염준혁','5','640921-1095832','01095621739','jh@gmail.com','서울 서초구 강남대로61길 13, 1204호','20151001',null,'Y',null,'0','1011.png');
INSERT INTO EMPLOYEE VALUES('1012','박영순','5','641029-2078321','01035271957','yson@daum.net','서울 양천구 신월로 294, 1층','20161010',null,'Y',null,'0','1012.png');
INSERT INTO EMPLOYEE VALUES('1013','김아름','5','701207-2759105','01046251893','beautykim@gmail.com','서울 성동구 아차산로7길 8, 2층 205호','20161104',null,'Y',null,'0','1013.png');
INSERT INTO EMPLOYEE VALUES('1014','박다희','5','940207-2582714','01085728174','daaaheee@gmail.com','서울 마포구 독막로 153, 1층 3호','20190101',null,'Y',null,'0','1014.png');



